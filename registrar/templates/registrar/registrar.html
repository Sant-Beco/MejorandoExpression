{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registrarse_usu</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <meta name="description" content="Red social para interactuar sobre el arte, cultura y deporte de tamesis antioquia" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Osmanya&family=Permanent+Marker&family=Pompiere&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet" />
  <link rel="icon" href="{% static 'app_funcionalidad/img/img_corporativa.png' %}" />
  <link href="{% static 'app_funcionalidad/css/forms.css' %}" rel="stylesheet" />
  <style>
    
    /* responsive desktop */

/* Media query para pantallas de computadoras (ancho mínimo 1024px) */
@media (min-width: 1024px) {
  .border-formularios {
    border: 10px solid;
    border-image: linear-gradient(to bottom left, #FF1500, #BB21D3, #F1172A, #BF21C6, #F0182F) 1;
    width: 750px;
    padding: 40px 100px;
    margin: 28px;
  }
  
  .x-olvi-registro {
      position: relative;
      top: -2px;
      right: 239px;
      width: 40px;
      height: 40px;
  }

  .x-olvi-registro:hover {
    color: #BB21D3;
  }

  .terminos {
    color: #000;
      text-decoration: none;
      display: flex;
  }

  .terminos:hover {
      color:#BF21C6;
  }

  .a-inicio{
    display: flex;
    justify-content: center;
    text-decoration: none;
    color: #000;
  }

  .a-inicio:hover{
    color: #BF21C6;
  }

  .for-check {
      display: flex;
      padding-bottom: 28px;
  }

  .titulo-icono {
      display: flex;
      padding: 0 25%;
  }

}



/* Estilo para pantallas pequeñas (móviles) */
@media (max-width: 768px) {
  .formulario-registro {
    border: 10px solid;
    border-image: linear-gradient(to bottom left, #FF1500, #BB21D3, #F1172A, #BF21C6, #F0182F) 1;
    max-width: 600px;
    margin: auto;
    padding: 20px;
  }

  .formulario-registro {
      padding: 15px;
  }
  
  .formulario-registro .row {
      flex-direction: column;
  }

  .formulario-registro .col {
      margin-bottom: 15px;
  }

  .formulario-registro .text-center {
      text-align: center;
  }

  .formulario-registro .icono {
      width: 80px;
  }

  .formulario-registro .titulo-registro {
      font-size: 1.5rem;
      text-align: center;
  }

  .formulario-registro .btn {
      width: 100%;
  }

  .formulario-registro .form-control {
      font-size: 0.9rem;
  }

  .formulario-registro .for-check {
      text-align: center;
  }

  .x-olvi-registro{
    position: relative;
    top: -28px; 
    left: 58px; 
    width: 20px;
    height: 20px;
  }

  .a-inicio{
    display: flex;
    justify-content: center;
    text-decoration: none;
    color: #BF21C6;
  }

  .terminos {
    color: #BF21C6;
    text-decoration: none;
    display: flex;
    margin-bottom: 20px;
    }
}


  </style>
</head>
<body>
  <!-- funcional con python -->
  <main class="col-12 d-inline-flex justify-content-center aside-caja">
    <form id="formulario" class="formulario-registro border-formularios" method="post" enctype="multipart/form-data">
      <a href="{% url 'login' %}" class="x-registro">
        <svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" fill="currentColor" class="bi bi-x-circle x-olvi-registro" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
        </svg>  
    </a>
    {% csrf_token %}
    <div class="titulo-icono text-center">
      <img src="{% static 'app_funcionalidad/img/img_corporativa.png' %}" alt="hola" class="icono" width="100">
      <h4 class="row align-items-center titulo-registro">Registro usuario</h4>
    </div>
    


    <div class="row">
      <div class="col">
        <label for="nombres"></label>
      <input type="text" class="form-control" id="nombres" name="nombres" placeholder="Nombres">
      </div>
      <div class="col">
        <label for="apellidos"></label>
        <input type="text" class="form-control" id="apellidos" name="apellidos" placeholder="Apellidos">
      </div>
    </div>

    <div class="div-registro mb-3 div-espacio">
      
    </div>
    <div>
      
    </div>
    <div class="row">
      <div class="col">
        <label for="fechaNacimiento">Fecha de Nacimiento</label>
        <input type="date" class="form-control" id="fechaNacimiento" name="fecha_nacimiento">
      </div>
      <div class="col">
        <label for="telefono">Teléfono</label>
        <input type="number" class="form-control" id="telefono" name="telefono" placeholder="+57">
      </div>
    </div>
    <div>
      <label for="gmail"></label>
      <input type="email" class="form-control" id="gmail" name="gmail" placeholder="Gmail">
    </div>

    <div class="row">
      <div class="col">
        <label for="alias"></label>
        <input type="text" class="form-control" id="alias" name="alias" placeholder="Alias">
      </div>
      <div class="col">
        <label for="uploadInput">Foto Perfil</label>
      <input type="file" class="form-control" id="uploadInput" name="foto_perfil">
      </div>
    </div>

    <div>
      
    </div>
    <div class="row">
      <div class="col">
        <label for="contraseña"></label>
        <input type="password" class="form-control" id="contraseña" name="contrasenia" placeholder="Contraseña*">
      </div>
      <div class="col">
        <label for="verificarContraseña"></label>
        <input type="password" class="form-control" id="verificarContraseña" placeholder="Verificar Contraseña*">
      </div>
    </div>
    <div class="col mb-3">
      
    </div>

    <div class="for-check text-center mt-3">
      <input type="checkbox" name="aceptar_terminos" id="checkTerms" class="form-checkbox-input"/>
      <label for="checkTerms" class="form-check-label">
        <a href="{% url 'terminos_condiciones' %}" target="_BLANK" class="terminos">Acepto los términos y condiciones</a>
      </label>
    </div>
    <div class="text-center mb-3">
      <button type="submit" class="btn boton-agregar">Registrarme</button>
    </div>
    <div>
      <a href="{% url 'vista_principal' %}" class="a-inicio">Inicio</a>
    </div>
  </form>
  </main> 

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var formulario = document.getElementById('formulario');
    
    formulario.addEventListener('submit', function (event) {
        event.preventDefault();
        
        // Captura los valores ingresados en los campos
        var nombres = document.getElementById('nombres').value.trim();
        var apellidos = document.getElementById('apellidos').value.trim();
        var fechaNacimiento = document.getElementById('fechaNacimiento').value;
        var telefono = document.getElementById('telefono').value.trim();
        var gmail = document.getElementById('gmail').value.trim();
        var alias = document.getElementById('alias').value.trim();
        var contraseña = document.getElementById('contraseña').value;
        var verificarContraseña = document.getElementById('verificarContraseña').value;
        var aceptarTerminos = document.getElementById('checkTerms').checked;
        
        // Limpiar mensajes de error anteriores
        var errorMessages = document.querySelectorAll('.error-message');
        errorMessages.forEach(function (msg) {
            msg.remove();
        });
        
        var isValid = true;
        
        function showError(inputId, message) {
            var inputElement = document.getElementById(inputId);
            var errorElement = document.createElement('div');
            errorElement.className = 'error-message';
            errorElement.style.color = 'red';
            errorElement.textContent = message;
            inputElement.parentNode.appendChild(errorElement);
            isValid = false;
        }
        
        // Validar cada campo y mostrar mensajes de error si están vacíos o incorrectos
        if (nombres === '') {
            showError('nombres', 'Completa el campo de nombres.');
        }
        if (apellidos === '') {
            showError('apellidos', 'Completa el campo de apellidos.');
        }
        if (fechaNacimiento === '') {
            showError('fechaNacimiento', 'Selecciona una fecha de nacimiento.');
        }
        if (telefono === '' || isNaN(telefono)) {
            showError('telefono', 'Introduce un número de teléfono válido.');
        }
        if (gmail === '' || !/\S+@\S+\.\S+/.test(gmail)) {
            showError('gmail', 'Introduce una dirección de correo electrónico válida.');
        }
        if (alias === '') {
            showError('alias', 'Completa el campo de alias.');
        }
        if (contraseña === '' || verificarContraseña === '') {
            showError('contraseña', 'Completa el campo de contraseña.');
        } else if (contraseña !== verificarContraseña) {
            showError('verificarContraseña', 'Las contraseñas no coinciden.');
        }
        if (!aceptarTerminos) {
            showError('checkTerms', 'Debes aceptar los términos y condiciones.');
        }
        
        if (isValid) {
            // Si es válido, enviar el formulario
            Swal.fire({
                icon: 'success',
                title: '¡Registro Exitoso!',
                text: 'Te has registrado correctamente.',
            }).then((result) => {
                if (result.isConfirmed) {
                    formulario.submit(); // Envía el formulario
                }
            });
        }
    });
});

  </script>
  

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{% static 'aplicacion/js/recuperar.js' %}"></script>
</body>
</html>